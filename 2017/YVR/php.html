<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>PHP</title>

		<meta name="description" content="">
		<meta name="author" content="Jennifer M. Dodd">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="/talks/reveal.js/css/reveal.css">
		<link rel="stylesheet" href="/talks/reveal.js/css/theme/simple.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="/talks/reveal.js/lib/css/github.css">

		<!-- Local style overrides -->
		<style type="text/css">
			.reveal table {
				width: 80%;
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="/talks/reveal.js/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
				<h2>PHP</h2>
				</section>

				<section>
				<p>Quick check</p>

				<pre><code style="language-php" data-trim>
&lt;?php

error_log( print_r( $_SERVER, true ) );

print_r( $_SERVER );
				</code></pre>
				</section>

				<section>
				<h3>Data Types</h3>
				</section>

				<section>
				<table>
				<tr>
					<td>Boolean</td>
					<td><pre><code class="language-php" data-trim>
$var = true;
$var = TRUE;
$var = false;
$var = FALSE;
					</code></pre></td>
				</tr>
				<tr>
					<td>Integer</td>
					<td><pre><code class="language-php" data-trim>
$var = 1;
$var = -5;
$var = 0123; // octal
$var = 0x33; // hex
$var = 0b111 // binary
					</code></pre></td>
				</tr>
				<tr>
					<td>Float</td>
					<td><pre><code class="language-php" data-trim>
$var = 3.14;
$var = 1.2e3;
$var = 7E-10;
					</code></pre></td>
				</tr>
				</table>
				</section>

				<section>
				<table>
				<tr>
					<td>String</td>
					<td><pre><code class="language-php" data-trim>
$b = 'bird';
$w = "worm";
$var = "the early $b gets the $w";
$var = "the early {$b} gets the {$w}";
					</code></pre></td>
				</tr>
				<tr>
					<td>Array</td>
					<td><pre><code class="language-php" data-trim>
$var = array( 'LA', 'MD' );
$var = array( 4, 8, 15, 16, 23, 42 );
					</code></pre>
					</td>
				</tr>
				<tr>
					<td>Associative array</td>
					<td><pre><code class="language-php" data-trim>
$var = array(
  'kermit' =&gt; 'frog',
  'fozzie' =&gt; 'bear',
  'gonzo'  =&gt; 'whatever',
);
					</code></pre></td>
				</tr>
				</table>
				</section>

				<section>
				<p>Multidimensional array (array of arrays or objects)</p>

				<pre><code class="language-php" data-trim>
$class = array(
	0 =&gt; array(
		'name' =&gt; 'Dasher',
		'age'  =&gt; 14,
		'city' =&gt; 'Svalbard',
	),
	1 =&gt; array(
		'name' =&gt; 'Dancer',
		'age'  =&gt; 13,
		'city' =&gt; 'Fairbanks',
	),
	2 =&gt; array(
		'name' =&gt; 'Prancer',
		'age'  =&gt; 14,
		'city' =&gt; 'Reykjavik',
	),
);

$var = $class[0]['name']; // 'Dasher'
				</code></pre>
				</section>

				<section>
				<h3>Special Characters</h3>

				<table>
				<tr>
					<td>Newline character</td>
					<td><pre><code>"\n"</code></pre></td>
				</tr>
				<tr>
					<td>Literal \n</td>
					<td><pre><code>'\n'</code></pre></td>
				</tr>
				<tr>
					<td>Tab character</td>
					<td><pre><code>"\t"</code></pre></td>
				</tr>
				<tr>
					<td>Literal \t</td>
					<td><pre><code>'\t'</code></pre></td>
				</tr>
				</table>
				</section>

				<section>
				<h3>Operators</h3>
				</section>

				<section>
				<table>
				<tr>
					<td>Assignment</td>
					<td><pre><code class="language-php" data-trim>
$a = 8;
$b = 7;
$a = $a + $b;
$a = $a + 4;
					</code></pre></td>
				</tr>
				<tr>
					<td>Comparison</td>
					<td><pre><code class="language-php" data-trim>
$a == $b  // equal
$a === $b // identical
$a != $b  // not equal
$a !== $b // not identical
					</code></pre></td>
				</tr>
				<tr>
					<td>Logical</td>
					<td><pre><code class="language-php" data-trim>
! $a     // true if $a is not true
$a &amp;&amp; $b // true if both $a and $b are true
$a || $b // true if either $a or $b is true
					</code></pre></td>
				</tr>
				</table>
				</section>

				<section>
				<table>
				<tr>
					<td>Incrementing</td>
					<td><pre><code class="language-php" data-trim>
$a++;     // return, then add one
$++a;     // add one, then return
$a--;     // return, then subtract one
$--a;     // subtract one, then return
					</code></pre></td>
				</tr>
				<tr>
					<td>String</td>
					<td><pre><code class="language-php" data-trim>
$a = $b . $c; // concatenate $b and $c
$a .= $b;     // append $b to $a
					</code></pre></td>
				</tr>
				</table>
				</section>

				<section>
				<p>Order of operations</p>

				<ol>
					<li>...</li>
					<li class="fragment">Use parentheses liberally.</li>
				</ol>

				<aside class="notes">
				<p>Really long list of precedence and associativity.</p>
				</aside>
				</section>

				<section>
				<h3>Control Structures</h3>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
if ( true ) {
	// Do this stuff
}

if ( true ) {
	// Do this stuff
} else {
	// Do this other stuff
}

if ( ! true ) {
	return; // or return false;
}
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
// Valid but not awesome
if ( true ) do_stuff();

if ( true )
	do_stuff();

// Alternative syntax (popular in themes/templates)
if ( true ) :
	// Do this stuff
else :
	// Do this other stuff
endif;
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
while ( true ) {
	// Do this stuff
}

while ( true ) :
	// Do this stuff
endwhile;
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
foreach ( $r as $k =&gt; $v ) {
	// Do this stuff
	// $k and $v are available as variables in this loop
}

foreach ( $r as $k =&gt; $v ) :
	// Do this stuff
endforeach;
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
switch ( $var ) {
	case '1':
		// Do this
		break;
	case '3':
	case '4':
		// Do this other stuff
	case '5':
		// Do this other stuff from 3/4 plus more
		break;
	default:
		// Do some default stuff here
}
		
switch ( $var ) :
	// cases here
endswitch;
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
for ( $i = 0; $i &lt; $number; $i++ ) {
	// Do this stuff
	// $i is available as a variable in this loop
}

for ( $i = 0; $i &lt; $number; $i++ ) :
	// Do this stuff
endfor;
				</code></pre>
				</section>

				<section>
				<p>Exercises</p>

				<ul>
					<li>Write a loop that will <code>echo()</code> all numbers evenly divisible by 3 between 42 and 105.</li>
					<li>Declare an array of board game names and iterate through it, <code>error_log</code>ing each name.</li>
				</ul>
				</section>

				<section>
				<h3>Functions</h3>
				</section>

				<section>
				<ul>
					<li>DRY: Don't Repeat Yourself</li>
					<li class="fragment">Does not execute until called</li>
					<li class="fragment">Scope: avoid overwriting global variables</li>
				</ul>
				</section>

				<section>
				<p>Finding functions</p>

				<ul>
					<li>php.net</li>
					<li class="fragment">Stack Overflow / Google</li>
					<li class="fragment">Look at existing code</li>
				</ul>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
// Function definition
function ascii_decorate( $name, $glitter = '***' ) {
	if ( empty( $name ) ) {
		$name = '*';
	}

	echo $glitter . "( {$name} )" . strrev( $glitter ) . '<br />';
}

// Actually calling the function
ascii_decorate( 'Pandamonium' );
ascii_decorate( 'Pandamonium', '.o.O' );
				</code></pre>

				<pre class="fragment"><code data-trim>
***( Pandamonium )***
.o.O( Pandamonium )O.o.
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
function absint( $maybeint ) {
	return abs( intval( $maybeint ) );
}

function my_absint( $int ) {
	echo absint( $int ) . '<br>';
}

// Returned, so echo
echo absint( -107 );
echo absint( 6.4 );
// Echo in the function
my_absint( "I am a string" );
my_absint( 0123 );
				</code></pre>

				<pre class="fragment"><code data-trim>
107
6
0
83
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
function the_title( $before = '', $after = '', $echo = true ) {
	$title = get_the_title();

	if ( strlen( $title ) == 0 )
		return;

	$title = $before . $title . $after;

	if ( $echo )
		echo $title;
	else
		return $title;
}

$title = the_title( '&lt;h3&gt;', '&lt;/h3&gt;', false );

the_title( '&lt;h3&gt;', '&lt;/h3&gt;' );
				</code></pre>

				<pre class="fragment"><code data-trim>
<h3>This Is My Title</h3>
				</code></pre>
				</section>

				<section>
				<p>Protect from namespace collisions</p>

				<pre><code class="language-php" data-trim>
if ( ! function_exists( 'my_precious' ) ) {
	function my_precious() {
		return false;
	}
}
				</code></pre>
				</section>

				<section>
				<p>Exercises</p>

				<ul>
					<li>Create an array with key names, value ages (integers) and assign it to the variable <code>$names</code>.</li>
					<li>Sort the array by number of characters in the name. <em>(optional)</em></li>
					<li>Create a function <code>print_name</code> that loops through the array and prints out each name and age.</li>
				</ul>
				</section>

				<section>
				<h3>Rare(r) Patterns</h3>
				</section>

				<section>
				<p>Ternary operators</p>

				<pre><code class="language-php" data-trim>
if ( $color == 'green' ) {
	$muppet = 'kermit';
} else {
	$muppet = 'gonzo';
}

$muppet = ( $color == 'green' ) ? 'kermit' : 'gonzo';
				</code></pre>
				</section>

				<section>
				<p>Needle/haystack versus haystack/needle</p>

				<pre><code class="language-php" data-trim>
// String search functions -- haystack / needle
$search = 'cat';
$str    = 'The cat in the hat';

strpos( $str, $search )

// Array search functions -- needle / haystack
$search = 'cat';
$arr    = explode( ' ', $str );

in_array( $search, $arr )
				</code></pre>
				</section>

				<section>
				<p>Heredoc</p>

				<pre><code class="language-php" data-trim>
$var = &lt;&lt;&lt;WP
This is for testing,
so not recommended for
production sitesâ€”yet.
WP;
				</code></pre>
				</section>

				<section>
				<p>&amp;$variable</p>

				<pre><code class="language-php" data-trim>
function add_one( &amp;$number ) {
	$number++;
}

$n = 5;
add_one( $n );
echo $n;
				</code></pre>

				<pre class="fragment"><code data-trim>
6
				</code></pre>

				<aside class="notes">
				<p>Must be declared on function definition</p>
				</aside>
				</section>

				<section>
				<p>@$variable or @function</p>

				<pre><code class="language-php" data-trim>
$file = @file( 'nope' );
				</code></pre>

				<aside class="notes">
				<p>"Silences" any error messages generated by an expression.</p>
				</aside>
				</section>

				<section>
				<p><code>try {} catch ( Exception $e );</code>

				<pre><code class="language-php" data-trim>
try {
	echo inverse( 0 ) . "\n";
} catch ( Exception $e ) {
	echo 'Caught exception: ' . $e-&gt;getMessage() . "\n";
}
				</code></pre>
				</section>

				<section>
				<p>Magic constants</p>

				<p><span class="fragment"><code>__LINE__</code></span>
				<span class="fragment">, <code>__FILE__</code></span>
				<span class="fragment">, <code>__DIR__</code></span>
				<span class="fragment">, <code>__FUNCTION__</code></span>
				<span class="fragment">, <code>__CLASS__</code></span>
				<span class="fragment">, <code>__METHOD__</code></span>
				<span class="fragment">, <code>__TRAIT__</code></span>
				<span class="fragment">, <code>__NAMESPACE__</code></span>
				</section>

				<section>
				<h3>Scope</h3>
				</section>

				<section>
				<p><img src="i/scope.png"></p>
				</section>

				<section>
				<h3>OOP</h3>
				</section>

				<section>
				<p><code>class {} versus object</code></p>

				<pre><code class="language-php" data-trim>
class Book {
	// Some stuff
}

$book = new Book();
				</code></pre>

				<aside class="notes">
				<p>class = blueprint, object = building</p>
				</aside>
				</section>

				<section>
				<p>Define a class</p>

				<pre><code class="language-php" data-trim>
class Book {
	// Properties
	var $title;

	// Methods
	function get_title() {
		return $this-&gt;title;
	}

	function set_title( $title ) {
		$this-&gt;title = $title;
	}
}
				</code></pre>
				</section>

				<section>
				<p><code>$this</code></p>

				<ul>
				</ul>
				</section>

				<section>
				<p>Instantiate the class... creating an object</p>

				<pre><code style="language-php" data-trim>
// Popular in instantiating plugins
new Book();

// New Book has handle $book
$book = new Book();
				</code></pre>
				</section>

				<section>
				<p>Interacting with objects</p>

				<pre><code style="language-php" data-trim>
$thgttg = new Book();
$thgttg-&gt;set_title( 'The Hitchhiker's Guide to the Galaxy' );

$tjoc = new Book();
$tjoc-&gt;set_title( 'The Joy of Cooking' );

// get method
echo $thgttg-&gt;get_title() . "\n";
// direct access
echo $tjoc-&gt;title . "\n";
				</code></pre>

				<pre class="fragment"><code style="language-php" data-trim>
The Hitchhiker's Guide to the Galaxy
The Joy of Cooking
				</code></pre>
				</section>

				<section>
				<p><code>__construct()</code></p>

				<ul>
					<li>Constructor method</li>
					<li>Automagically called when object is instantiated</li>
					<li>Can take arguments</li>
					<li>Parents are not automagically called by children, use<br>
					<code>parent::__construct()</code> to call parent constructor.</li>
				</ul>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
class Book {
	...
	__construct( $title ) {
		if ( ! empty( $title ) ) {
			$this-&gt;set_title( $title );
		}
	}
	...
}
				</code></pre>
				</section>

				<section>
				<p>Access restrictions</p>
				
				<ul>
					<li>Can be applied to both properties and methods</li>
					<li class="fragment"><strong>public:</strong> Accessible outside the class via <code>-&gt;</code>, default restriction</li>
					<li class="fragment"><strong>protected:</strong> Only this class and derived classes can access this.</li>
					<li class="fragment"><strong>private:</strong> Only the same class can access this.</li>
				</ul>
				</section>

				<section>
				<p><code>extends</code></p>

				<ul>
					<li>Used to create child classes</li>
					<li>Reuse code from base class (DRY)</li>
					<li>Child classes can override parent class methods</li>
					<li>Child classes can still access the overridden methods using the static method call</li>
				</ul>
				</section>

				<section>
				<pre><code style="language-php" data-trim>
class Encyclopedia extends Book {
	var $volumes;

	function get_volumes() {
		return $this-&gt;volumes;
	}

	function set_volumes( $volumes ) {
		$this-&gt;volumes = $volumes;
	}
}
				</code></pre>
				</section>

				<section>
				<pre><code style="language-php" data-trim>
class Encyclopedia extends Book {
	function __construct( $title, $volumes ) {
		Book::set_title( $title );
		// OR
		parent::set_title( $title );
		// OR
		parent::__construct( $title );

		$this-&gt;set_volumes = $volumes;
	}
}
				</code></pre>
				</section>

				<section>
				<p><code>abstract</code></p>

				<ul>
					<li>Used to guarantee that child classes have certain methods and properties</li>
					<li>Useful in standardizing across APIs</li>
				</ul>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
abstract class Keyring_Service {
	const NAME          = '';

	function build_token_meta( $token ) {
		return apply_filters( 'keyring_access_token_meta', array(), $this-&gt;get_name(), $token, null, $this );
	}

	function get_name() {
		$c = get_called_class();
		if ( '' != $c::NAME )
			$name = $c::NAME;
		else
			$name = strtolower( $c );
		return $name;
	}
}
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
abstract class Keyring_Service {
	abstract function request_token();
	abstract function verify_token();
	abstract function request( $url, array $params );
}
				</code></pre>
				</section>

				<section>
				<p>Protect from namespace collisions</p>

				<pre><code class="language-php" data-trim>
if ( ! class_exists( 'Practical_Development' ) ) {
	class Practical_Development {
		// Class definition
	}
}
				</code></pre>

				<p>Less common: <code>method_exists()</code>, <code>property_exists()</code></p>
				</section>

				<section>
				<p>Singleton pattern</p>

				<pre><code class="language-php" data-trim>
class The_One {
	private static $instance;
	private $name;

	public static function get_instance( $name ) {
		if ( null === self::$instance ) {
			self::$instance = new The_One( $name );
		}

		return self::$instance;
	}

	protected function __construct( $name ) {
		$this-&gt;name = $name;
	}
	private function __clone() {}
}
				</code></pre>
				</section>

				<section>
				<pre><code class="language-php" data-trim>
class The_One {
	function get_name() {
		return $this-&gt;name;
	}
}

$neo = The_One::get_instance( 'Neo' );
echo $neo-&gt;get_name() . '<br>';
$morpheus = The_One::get_instance( 'Morpheus' );
echo $morpheus-&gt;get_name() . '<br>';
				</code></pre>

				<pre><code data-trim>
Neo
Neo
				</code></pre>
				</section>

				<section>
				<p>Exercises</p>

				<ul>
					<li>Create a class Calculator with methods add, sub, mult, and div. Store the last answer so that it can be recalled using the method <code>get_last_answer()</code>. Bonus: Store the last 5 problems that were solved.</li>
				</ul>

				<pre><code class="language-php" data-trim>
include 'class.calculator.php';

$calculator = new Calculator;
$calculator-&gt;add( 5, 2 );
$calculator-&gt;sub( 8, 5 );
$calculator-&gt;get_last_answer();
$calculator-&gt;mult( 3, 1 );
$calculator-&gt;get_last_answer();
$calculator-&gt;div( 56, 8 );
$calculator-&gt;get_last_five_answers();
				</code></pre>
				</section>
			</div>

		</div>

		<script src="/talks/reveal.js/lib/js/head.min.js"></script>
		<script src="/talks/reveal.js/js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: '/talks/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '/talks/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '/talks/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '/talks/reveal.js/plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '/talks/reveal.js/plugin/zoom-js/zoom.js', async: true },
					{ src: '/talks/reveal.js/plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
